[{"path":"https://lshpaner.github.io/kfre_r/articles/getting-started.html","id":"quick-start","dir":"Articles","previous_headings":"","what":"Quick start","title":"kfre: Getting Started","text":"","code":"toy <- data.frame(   age=c(55,72), sex_txt=c(\"male\",\"female\"),   eGFR=c(45,28), uACR=c(120,800),   dm=c(1,0), htn=c(1,1),   albumin=c(4.2,3.4), phosphorous=c(3.3,4.6),   bicarbonate=c(24,22), calcium=c(9.1,9.8) )  rp <- kfre:::RiskPredictor$new(   df = toy,   columns = list(age=\"age\", sex=\"sex_txt\", eGFR=\"eGFR\", uACR=\"uACR\",                  dm=\"dm\", htn=\"htn\", albumin=\"albumin\", phosphorous=\"phosphorous\",                  bicarbonate=\"bicarbonate\", calcium=\"calcium\") )  rp$predict_kfre(years=2, is_north_american=TRUE, num_vars=4) #> [1] 0.01247073 0.09997874 toy2 <- kfre::add_kfre_risk_col(toy, \"age\",\"sex_txt\",\"eGFR\",\"uACR\",                                 dm_col=\"dm\", htn_col=\"htn\",                                 albumin_col=\"albumin\", phosphorous_col=\"phosphorous\",                                 bicarbonate_col=\"bicarbonate\", calcium_col=\"calcium\",                                 num_vars=c(4,6,8), years=c(2,5), is_north_american=TRUE)  head(toy2) #>   age sex_txt eGFR uACR dm htn albumin phosphorous bicarbonate calcium #> 1  55    male   45  120  1   1     4.2         3.3          24     9.1 #> 2  72  female   28  800  0   1     3.4         4.6          22     9.8 #>   kfre_4var_2year kfre_4var_5year kfre_6var_2year kfre_6var_5year #> 1      0.01247073      0.03842137       0.0119651      0.03688339 #> 2      0.09997874      0.28026055       0.1094176      0.30356514 #>   kfre_8var_2year kfre_8var_5year #> 1      0.01126961      0.03624505 #> 2      0.11930161      0.33888148"},{"path":"https://lshpaner.github.io/kfre_r/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Leonid Shpaner. Author, maintainer.            https://www.leonshpaner.com","code":""},{"path":"https://lshpaner.github.io/kfre_r/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Shpaner L (2025). kfre: KFRE Risk Prediction Tools (R). R package, https://lshpaner.github.io/kfre_r/. Tangri N, Stevens L, Griffith J, Tighiouart H, Djurdjev O, Naimark D, Levin , Levey (2011). “predictive model progression chronic kidney disease kidney failure.” JAMA, 305(15), 1553–1559. doi:10.1001/jama.2011.451. Tangri N, Grams M, Levey , Coresh J (2016). “Multinational assessment accuracy equations predicting risk kidney failure: meta-analysis.” JAMA, 315(2), 164–174. doi:10.1001/jama.2015.18202. Sumida K, Nadkarni G, Grams M (2020). “Conversion urine protein-creatinine ratio urine dipstick protein urine albumin-creatinine ratio use CKD screening prognosis.” Annals Internal Medicine, 173(6), 426–435. doi:10.7326/M20-0529.","code":"@Manual{,   title = {kfre: KFRE Risk Prediction Tools (R)},   author = {Leonid Shpaner},   year = {2025},   note = {R package},   url = {https://lshpaner.github.io/kfre_r/}, } @Article{,   title = {A predictive model for progression of chronic kidney disease to kidney failure},   author = {Navdeep Tangri and Lesley A. Stevens and John L. Griffith and Hassan Tighiouart and Ognjenka Djurdjev and Dina Naimark and Adeera Levin and Andrew S. Levey},   journal = {JAMA},   year = {2011},   volume = {305},   number = {15},   pages = {1553--1559},   doi = {10.1001/jama.2011.451}, } @Article{,   title = {Multinational assessment of accuracy of equations for predicting risk of kidney failure: A meta-analysis},   author = {Navdeep Tangri and Morgan E. Grams and Andrew S. Levey and Josef Coresh},   journal = {JAMA},   year = {2016},   volume = {315},   number = {2},   pages = {164--174},   doi = {10.1001/jama.2015.18202}, } @Article{,   title = {Conversion of urine protein-creatinine ratio or urine dipstick protein to urine albumin-creatinine ratio for use in CKD screening and prognosis},   author = {Kevin Sumida and Girish N. Nadkarni and Morgan E. Grams},   journal = {Annals of Internal Medicine},   year = {2020},   volume = {173},   number = {6},   pages = {426--435},   doi = {10.7326/M20-0529}, }"},{"path":"https://lshpaner.github.io/kfre_r/index.html","id":"table-of-contents","dir":"","previous_headings":"","what":"Table of Contents","title":"Kidney Failure Risk Equation (KFRE) Tools","text":"KFRE Risk Prediction Tools (R) Installation GitHub (Development) Dependencies Toy Data Vectorized Predictions RiskPredictor Single-Person Predictions Add KFRE Risk Columns DataFrame CKD Staging & ESRD Outcome Labels uPCR → uACR Conversion Evaluation Metrics (AUC-ROC, AP, Brier…) Plot ROC / PR Curves Running Tests API Surface (Exports) Notes Parity Python References License","code":""},{"path":"https://lshpaner.github.io/kfre_r/index.html","id":"kfre-risk-prediction-tools-r","dir":"","previous_headings":"","what":"KFRE Risk Prediction Tools (R)","title":"Kidney Failure Risk Equation (KFRE) Tools","text":"kfre R implementation helpers around Kidney Failure Risk Equation (KFRE), including: Vectorized per-person KFRE predictions (4-, 6-, 8-variable models; 2- 5-year horizons) Convenience wrappers add KFRE risk columns data.frame uPCR → uACR conversion utility CKD stage labeling utilities Evaluation helpers (AUC-ROC, Average Precision, Brier, etc.) Publication-style ROC Precision–Recall plots","code":""},{"path":"https://lshpaner.github.io/kfre_r/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Kidney Failure Risk Equation (KFRE) Tools","text":"","code":"install.packages(\"kfre\")"},{"path":"https://lshpaner.github.io/kfre_r/index.html","id":"github-development","dir":"","previous_headings":"","what":"GitHub (Development)","title":"Kidney Failure Risk Equation (KFRE) Tools","text":"","code":"# install.packages(\"remotes\") remotes::install_github(\"lshpaner/kfre_r\")"},{"path":"https://lshpaner.github.io/kfre_r/index.html","id":"dependencies","dir":"","previous_headings":"","what":"Dependencies","title":"Kidney Failure Risk Equation (KFRE) Tools","text":"Core imports: R6, stats, ggplot2, pROC, precrec Suggested tests/vignettes: testthat (>= 3.0.0), knitr, rmarkdown","code":""},{"path":[]},{"path":"https://lshpaner.github.io/kfre_r/index.html","id":"id_1-toy-data","dir":"","previous_headings":"Quick Start","what":"1. Toy data","title":"Kidney Failure Risk Equation (KFRE) Tools","text":"","code":"toy <- data.frame(   age = c(55, 72),   sex_txt = c(\"male\", \"female\"),   eGFR = c(45, 28),   uACR = c(120, 800),   dm = c(1, 0),   htn = c(1, 1),   albumin = c(4.2, 3.4),   phosphorous = c(3.3, 4.6),   bicarbonate = c(24, 22),   calcium = c(9.1, 9.8),   stringsAsFactors = FALSE )  cols <- list(   age = \"age\",   sex = \"sex_txt\",   eGFR = \"eGFR\",   uACR = \"uACR\",   dm = \"dm\",   htn = \"htn\",   albumin = \"albumin\",   phosphorous = \"phosphorous\",   bicarbonate = \"bicarbonate\",   calcium = \"calcium\" )"},{"path":"https://lshpaner.github.io/kfre_r/index.html","id":"id_2-vectorized-predictions-with-riskpredictor","dir":"","previous_headings":"Quick Start","what":"2. Vectorized predictions with RiskPredictor","title":"Kidney Failure Risk Equation (KFRE) Tools","text":"","code":"rp <- RiskPredictor$new(df = toy, columns = cols)  # 4-variable KFRE (2-year), North America constants p4_2y <- rp$predict_kfre(   years = 2, is_north_american = TRUE,   use_extra_vars = FALSE, num_vars = 4 )  # 6-variable KFRE (5-year) p6_5y <- rp$predict_kfre(   years = 5, is_north_american = TRUE,   use_extra_vars = TRUE, num_vars = 6 )  # 8-variable KFRE (2-year) p8_2y <- rp$predict_kfre(   years = 2, is_north_american = TRUE,   use_extra_vars = TRUE, num_vars = 8 )  p4_2y p6_5y p8_2y"},{"path":"https://lshpaner.github.io/kfre_r/index.html","id":"id_3-single-person-predictions","dir":"","previous_headings":"Quick Start","what":"3. Single-person predictions","title":"Kidney Failure Risk Equation (KFRE) Tools","text":"","code":"# Male, 55yo, 2-year risk (4-var) rp$kfre_person(   age = 55, is_male = TRUE,   eGFR = 45, uACR = 120,   is_north_american = TRUE, years = 2 )  # Female, 72yo, 5-year risk (6-var) rp$kfre_person(   age = 72, is_male = FALSE,   eGFR = 28, uACR = 800,   is_north_american = TRUE, years = 5,   dm = 0, htn = 1 )  # Female, 72yo, 2-year risk (8-var) rp$kfre_person(   age = 72, is_male = FALSE,   eGFR = 28, uACR = 800,   is_north_american = TRUE, years = 2,   albumin = 3.4, phosphorous = 4.6, bicarbonate = 22, calcium = 9.8 )"},{"path":"https://lshpaner.github.io/kfre_r/index.html","id":"id_4-add-kfre-risk-columns-to-a-dataframe","dir":"","previous_headings":"Quick Start","what":"4. Add KFRE risk columns to a data.frame","title":"Kidney Failure Risk Equation (KFRE) Tools","text":"","code":"toy_kfre <- add_kfre_risk_col(   df = toy,   age_col = \"age\",   sex_col = \"sex_txt\",   eGFR_col = \"eGFR\",   uACR_col = \"uACR\",   dm_col = \"dm\",   htn_col = \"htn\",   albumin_col = \"albumin\",   phosphorous_col = \"phosphorous\",   bicarbonate_col = \"bicarbonate\",   calcium_col = \"calcium\",   num_vars = c(4, 6, 8),   years = c(2, 5),   is_north_american = TRUE,   copy = TRUE )  names(toy_kfre) head(toy_kfre) # Adds: # kfre_4var_2year, kfre_4var_5year, # kfre_6var_2year, kfre_6var_5year, # kfre_8var_2year, kfre_8var_5year"},{"path":"https://lshpaner.github.io/kfre_r/index.html","id":"id_5-ckd-staging--esrd-outcome-labels","dir":"","previous_headings":"Quick Start","what":"5. CKD staging & ESRD outcome labels","title":"Kidney Failure Risk Equation (KFRE) Tools","text":"","code":"# ESRD outcome within 2 years (duration is in days → converted to years) out <- data.frame(   eGFR = c(95, 25),   ESRD_flag = c(1, 1),   followup_days = c(200, 1000) )  out <- class_esrd_outcome(   df = out,   col = \"ESRD_flag\",   years = 2,   duration_col = \"followup_days\",   prefix = \"esrd\",   create_years_col = TRUE ) # Adds: ESRD_duration_years and esrd_2_year_outcome  # CKD stage labels out <- class_ckd_stages(   df = out,   egfr_col = \"eGFR\",   stage_col = \"stage\",   combined_stage_col = \"stage_combined\" )  table(out$stage) table(out$stage_combined)"},{"path":"https://lshpaner.github.io/kfre_r/index.html","id":"id_6-upcr--uacr-conversion","dir":"","previous_headings":"Quick Start","what":"6. uPCR → uACR conversion","title":"Kidney Failure Risk Equation (KFRE) Tools","text":"","code":"df_pcr <- data.frame(   sex = c(\"female\",\"male\",\"female\"),   dm  = c(1,0,1),   htn = c(1,1,0),   pcr = c(150, 600, 50) )  acr <- upcr_uacr(   df_pcr,   sex_col = \"sex\",   diabetes_col = \"dm\",   hypertension_col = \"htn\",   upcr_col = \"pcr\",   female_str = \"female\" )  acr"},{"path":"https://lshpaner.github.io/kfre_r/index.html","id":"id_7-evaluation-metrics-auc-roc-ap-brier","dir":"","previous_headings":"Quick Start","what":"7. Evaluation metrics (AUC-ROC, AP, Brier…)","title":"Kidney Failure Risk Equation (KFRE) Tools","text":"data.frame must include: Outcome columns named like *_2_year_outcome / *_5_year_outcome Prediction columns named kfre_{n}var_{year}year, e.g. kfre_4var_2year","code":"met <- eval_kfre_metrics(   df = toy_kfre,                 # must contain truth + prediction columns   n_var_list = c(4, 6, 8),   outcome_years = c(2, 5),   decimal_places = 4 )  met # Rows: Metrics; Cols: \"{2_year|5_year}_{4|6|8}_var_kfre\""},{"path":"https://lshpaner.github.io/kfre_r/index.html","id":"id_8-plot-roc--pr-curves","dir":"","previous_headings":"Quick Start","what":"8. Plot ROC / PR curves","title":"Kidney Failure Risk Equation (KFRE) Tools","text":"","code":"# Basic: compute & plot both ROC and PR (no files written) plot_kfre_metrics(   df = toy_kfre,   num_vars = c(4, 6, 8),   plot_type = \"all_plots\",   mode = \"both\",              # compute + plot   show_years = c(2, 5) )  # Save to disk (PNG/SVG) plot_kfre_metrics(   df = toy_kfre,   num_vars = c(4, 6),   plot_type = \"auc_roc\",   mode = \"both\",   show_years = c(2, 5),   save_plots = TRUE,   image_path_png = \"plots\",   image_prefix = \"kfre\" )"},{"path":"https://lshpaner.github.io/kfre_r/index.html","id":"running-tests","dir":"","previous_headings":"","what":"Running Tests","title":"Kidney Failure Risk Equation (KFRE) Tools","text":"’ve cloned repo: see unit tests end--end flow evaluation utilities.","code":"library(devtools) devtools::load_all(\".\") devtools::test()"},{"path":"https://lshpaner.github.io/kfre_r/index.html","id":"api-surface-exports","dir":"","previous_headings":"","what":"API surface (exports)","title":"Kidney Failure Risk Equation (KFRE) Tools","text":"$predict_kfre(years, is_north_american, use_extra_vars, num_vars) $kfre_person(...) predict_kfre(df, columns, years, is_north_american, use_extra_vars, num_vars) add_kfre_risk_col(...) Utilities: upcr_uacr(...) perform_conversions(...) class_esrd_outcome(...) class_ckd_stages(...) eval_kfre_metrics(...) plot_kfre_metrics(...)","code":""},{"path":"https://lshpaner.github.io/kfre_r/index.html","id":"notes-on-parity-with-python","dir":"","previous_headings":"","what":"Notes on parity with Python","title":"Kidney Failure Risk Equation (KFRE) Tools","text":"R implementations designed mirror Python versions (naming, shapes, expected columns). packages differ (e.g., ROC/PR computation), use pROC precrec maintain metric parity.","code":""},{"path":"https://lshpaner.github.io/kfre_r/index.html","id":"references","dir":"","previous_headings":"","what":"References","title":"Kidney Failure Risk Equation (KFRE) Tools","text":"Tangri N, Grams , Levey , et al. (2016). Multinational assessment accuracy equations predicting risk kidney failure: meta-analysis. JAMA, 315(2), 164–174. doi:10.1001/jama.2015.18202 Tangri N, Stevens LA, Griffith J, et al. (2011). predictive model progression chronic kidney disease kidney failure. JAMA, 305(15), 1553–1559. doi:10.1001/jama.2011.451 Sumida K, Nadkarni GN, Grams , et al. (2020). Conversion urine protein-creatinine ratio urine dipstick protein urine albumin-creatinine ratio use CKD screening prognosis. Ann Intern Med, 173(6), 426–435. doi:10.7326/M20-0529","code":""},{"path":"https://lshpaner.github.io/kfre_r/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"Kidney Failure Risk Equation (KFRE) Tools","text":"kfre distributed MIT License. See LICENSE information.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/add_kfre_risk_col.html","id":null,"dir":"Reference","previous_headings":"","what":"Add KFRE risk columns to a data frame — add_kfre_risk_col","title":"Add KFRE risk columns to a data frame — add_kfre_risk_col","text":"Adds KFRE risk columns selected model sizes horizons using 4, 6, 8 variable equations.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/add_kfre_risk_col.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add KFRE risk columns to a data frame — add_kfre_risk_col","text":"","code":"add_kfre_risk_col(   df,   age_col = NULL,   sex_col = NULL,   eGFR_col = NULL,   uACR_col = NULL,   dm_col = NULL,   htn_col = NULL,   albumin_col = NULL,   phosphorous_col = NULL,   bicarbonate_col = NULL,   calcium_col = NULL,   num_vars = 8,   years = c(2, 5),   is_north_american = FALSE,   copy = TRUE,   precision = NULL )"},{"path":"https://lshpaner.github.io/kfre_r/reference/add_kfre_risk_col.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add KFRE risk columns to a data frame — add_kfre_risk_col","text":"df Data frame predictor columns. age_col Column name age. sex_col Column name sex, text integer accepted. eGFR_col Column name eGFR, mL/min/1.73 m^2. uACR_col Column name uACR, mg/g. dm_col Optional column name diabetes indicator. htn_col Optional column name hypertension indicator. albumin_col Optional column name serum albumin, g/dL. phosphorous_col Optional column name serum phosphorus, mg/dL. bicarbonate_col Optional column name bicarbonate, mmol/L. calcium_col Optional column name calcium, mg/dL. num_vars Integer vector, one 4, 6, 8. years Integer vector, 2, 5. is_north_american Logical, use North American calibration. copy Logical, TRUE work copy df. precision Optional integer, digits round probabilities.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/add_kfre_risk_col.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add KFRE risk columns to a data frame — add_kfre_risk_col","text":"input data frame added kfre_<n>var_<y>year columns.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/add_kfre_risk_col.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Add KFRE risk columns to a data frame — add_kfre_risk_col","text":"Tangri, N., Stevens, L. ., Griffith, J., Tighiouart, H., Djurdjev, O., Naimark, D., Levin, ., & Levey, . S. (2011). predictive model progression chronic kidney disease kidney failure. JAMA, 305(15), 1553–1559. doi:10.1001/jama.2011.451 Tangri, N., Grams, M. E., Levey, . S., et al. (2016). Multinational assessment accuracy Kidney Failure Risk Equation people chronic kidney disease. JAMA, 315(2), 164–174. doi:10.1001/jama.2015.18202","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/add_kfre_risk_col.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add KFRE risk columns to a data frame — add_kfre_risk_col","text":"","code":"df <- data.frame(   age = 60L, sex = 1L, eGFR = 30, uACR = 500,   dm = 1L, htn = 0L, albumin = 40,   phosphorous = 1.1, bicarbonate = 24, calcium = 9.2 )  add_kfre_risk_col(   df,   age_col = \"age\", sex_col = \"sex\",   eGFR_col = \"eGFR\", uACR_col = \"uACR\",   num_vars = 4, years = 2 ) #>   age sex eGFR uACR dm htn albumin phosphorous bicarbonate calcium #> 1  60   1   30  500  1   0      40         1.1          24     9.2 #>   kfre_4var_2year #> 1      0.05770765"},{"path":"https://lshpaner.github.io/kfre_r/reference/apply_precision.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply precision (round helper) — apply_precision","title":"Apply precision (round helper) — apply_precision","text":"Simple wrapper around base round() used tests examples.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/apply_precision.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply precision (round helper) — apply_precision","text":"","code":"apply_precision(x, n = NULL)"},{"path":"https://lshpaner.github.io/kfre_r/reference/apply_precision.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply precision (round helper) — apply_precision","text":"x Numeric vector. n Integer number digits keep. NULL, return x unchanged.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/apply_precision.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply precision (round helper) — apply_precision","text":"Numeric vector rounded n.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/class_ckd_stages.html","id":null,"dir":"Reference","previous_headings":"","what":"Label CKD stages or ESRD outcomes. — class_ckd_stages","title":"Label CKD stages or ESRD outcomes. — class_ckd_stages","text":"Label CKD stages ESRD outcomes.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/class_ckd_stages.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Label CKD stages or ESRD outcomes. — class_ckd_stages","text":"","code":"class_ckd_stages(   df,   egfr_col = \"eGFR\",   stage_col = NULL,   combined_stage_col = NULL )"},{"path":"https://lshpaner.github.io/kfre_r/reference/class_ckd_stages.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Label CKD stages or ESRD outcomes. — class_ckd_stages","text":"df Data frame input. egfr_col Column name eGFR, mL/min/1.73 m^2. stage_col Output column name detailed CKD stages. combined_stage_col Output column combined stages 3 5.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/class_ckd_stages.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Label CKD stages or ESRD outcomes. — class_ckd_stages","text":"modified data frame added label columns.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/class_ckd_stages.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Label CKD stages or ESRD outcomes. — class_ckd_stages","text":"","code":"df <- data.frame(eGFR = c(92, 58, 42, 28, 12)) class_ckd_stages(df, egfr_col = \"eGFR\") #>   eGFR #> 1   92 #> 2   58 #> 3   42 #> 4   28 #> 5   12"},{"path":"https://lshpaner.github.io/kfre_r/reference/class_esrd_outcome.html","id":null,"dir":"Reference","previous_headings":"","what":"Label CKD stages or ESRD outcomes. — class_esrd_outcome","title":"Label CKD stages or ESRD outcomes. — class_esrd_outcome","text":"Label CKD stages ESRD outcomes.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/class_esrd_outcome.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Label CKD stages or ESRD outcomes. — class_esrd_outcome","text":"","code":"class_esrd_outcome(   df,   col,   years,   duration_col,   prefix = NULL,   create_years_col = TRUE )"},{"path":"https://lshpaner.github.io/kfre_r/reference/class_esrd_outcome.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Label CKD stages or ESRD outcomes. — class_esrd_outcome","text":"df Data frame eGFR column. col Column name ESRD event indicator, 0 1. years Integer horizon, 2 5. duration_col Column name follow time days. prefix Optional prefix derived outcome column. create_years_col Logical, add <years>_year_outcome column.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/class_esrd_outcome.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Label CKD stages or ESRD outcomes. — class_esrd_outcome","text":"modified data frame added label columns.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/class_esrd_outcome.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Label CKD stages or ESRD outcomes. — class_esrd_outcome","text":"","code":"df <- data.frame(   eGFR = c(90, 45, 25, 10),   esrd = c(0, 0, 1, 0),   followup_days = c(365, 800, 500, 1200) ) class_esrd_outcome(   df,   col = \"esrd\",   years = 2,   duration_col = \"followup_days\" ) #>   eGFR esrd followup_days ESRD_duration_years 2_year_outcome #> 1   90    0           365           0.9993155              0 #> 2   45    0           800           2.1902806              0 #> 3   25    1           500           1.3689254              1 #> 4   10    0          1200           3.2854209              0"},{"path":"https://lshpaner.github.io/kfre_r/reference/eval_kfre_metrics.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarize KFRE performance metrics by model size and horizon — eval_kfre_metrics","title":"Summarize KFRE performance metrics by model size and horizon — eval_kfre_metrics","text":"Builds wide table Precision, Sensitivity, Specificity, AUC, Brier, Average Precision specified KFRE variants 2 5 years.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/eval_kfre_metrics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarize KFRE performance metrics by model size and horizon — eval_kfre_metrics","text":"","code":"eval_kfre_metrics(df, n_var_list, outcome_years = 2, decimal_places = 6)"},{"path":"https://lshpaner.github.io/kfre_r/reference/eval_kfre_metrics.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarize KFRE performance metrics by model size and horizon — eval_kfre_metrics","text":"df Data frame truth probability columns. n_var_list Integer vector models evaluate, 4, 6, 8. outcome_years Integer vector horizons, 2, 5. decimal_places Integer digits round displayed values.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/eval_kfre_metrics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarize KFRE performance metrics by model size and horizon — eval_kfre_metrics","text":"Data frame metrics one column per model-horizon.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/kfre.html","id":null,"dir":"Reference","previous_headings":"","what":"kfre: KFRE Risk Prediction Tools (R) — kfre","title":"kfre: KFRE Risk Prediction Tools (R) — kfre","text":"Implements Kidney Failure Risk Equation (KFRE; Tangri et al.) compute 2- 5-year risk (4-, 6-, 8-variable models), add risk columns data frames, classify CKD stages/ESRD outcomes, evaluate & plot performance.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/kfre.html","id":"key-functions","dir":"Reference","previous_headings":"","what":"Key functions","title":"kfre: KFRE Risk Prediction Tools (R) — kfre","text":"risk_pred_core() add_kfre_risk_col() eval_kfre_metrics(), plot_kfre_metrics() class_esrd_outcome(), class_ckd_stages()","code":""},{"path":[]},{"path":"https://lshpaner.github.io/kfre_r/reference/kfre.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"kfre: KFRE Risk Prediction Tools (R) — kfre","text":"Leonid Shpaner lshpaner@ucla.edu (ORCID) https://github.com/lshpaner/kfre_r https://www.leonshpaner.com/","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/perform_conversions.html","id":null,"dir":"Reference","previous_headings":"","what":"Perform unit and code conversions used by KFRE helpers. — perform_conversions","title":"Perform unit and code conversions used by KFRE helpers. — perform_conversions","text":"Perform unit code conversions used KFRE helpers.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/perform_conversions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Perform unit and code conversions used by KFRE helpers. — perform_conversions","text":"","code":"perform_conversions(   df,   reverse = FALSE,   convert_all = FALSE,   upcr_col = NULL,   calcium_col = NULL,   phosphate_col = NULL,   albumin_col = NULL )"},{"path":"https://lshpaner.github.io/kfre_r/reference/perform_conversions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Perform unit and code conversions used by KFRE helpers. — perform_conversions","text":"df Data frame source columns convert. reverse Logical, reverse conversion TRUE. convert_all Logical, convert known columns TRUE. upcr_col Column name urine protein creatinine ratio. calcium_col Optional column serum calcium, mg/dL. phosphate_col Optional column serum phosphorus, mg/dL. albumin_col Optional column serum albumin, g/dL.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/perform_conversions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Perform unit and code conversions used by KFRE helpers. — perform_conversions","text":"data frame converted columns.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/perform_conversions.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Perform unit and code conversions used by KFRE helpers. — perform_conversions","text":"","code":"df <- data.frame(   upcr = c(100, 400),         # mg/g (or g/g scaled accordingly)   albumin = c(40, 38),        # g/L   phosphorous = c(1.1, 1.3),  # mmol/L   calcium = c(9.2, 8.8)       # mg/dL ) perform_conversions(df) #>   upcr albumin phosphorous calcium #> 1  100      40         1.1     9.2 #> 2  400      38         1.3     8.8"},{"path":"https://lshpaner.github.io/kfre_r/reference/plot_kfre_metrics.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot ROC and Precision Recall curves for KFRE variants — plot_kfre_metrics","title":"Plot ROC and Precision Recall curves for KFRE variants — plot_kfre_metrics","text":"Draws ROC PR curves selected models horizons. mode \"\", returns list ggplot objects. Otherwise, draws plots returns NULL invisibly.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/plot_kfre_metrics.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot ROC and Precision Recall curves for KFRE variants — plot_kfre_metrics","text":"df Data frame containing model probabilities outcomes. num_vars Integer vector, KFRE model sizes plot, 4, 6, 8. fig_size Numeric length 2, plot device width height. mode Character, \"\" return plots, otherwise draw . image_path_png Optional directory save PNGs. image_path_svg Optional directory save SVGs. image_prefix Optional filename prefix. bbox_inches Character, passed saving. plot_type Character, plots render. save_plots Logical, save plots disk TRUE. show_years Integer vector, horizons show, 2, 5. plot_combinations Logical, TRUE draw pairwise overlays. show_subplots Logical, arrange subplots TRUE. decimal_places Integer digits annotations. open_new_device Logical, open device plotting.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/plot_kfre_metrics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot ROC and Precision Recall curves for KFRE variants — plot_kfre_metrics","text":"List ggplot objects mode == \"\", else NULL.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/risk_pred_core.html","id":null,"dir":"Reference","previous_headings":"","what":"KFRE risk prediction for a single person — risk_pred_core","title":"KFRE risk prediction for a single person — risk_pred_core","text":"Computes Kidney Failure Risk Equation probability 2 5 years.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/risk_pred_core.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"KFRE risk prediction for a single person — risk_pred_core","text":"","code":"risk_pred_core(   age,   sex,   eGFR,   uACR,   is_north_american,   dm = NULL,   htn = NULL,   albumin = NULL,   phosphorous = NULL,   bicarbonate = NULL,   calcium = NULL,   years = 2 )"},{"path":"https://lshpaner.github.io/kfre_r/reference/risk_pred_core.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"KFRE risk prediction for a single person — risk_pred_core","text":"age Numeric age years. sex Integer sex indicator, 1 male, 0 female. eGFR Estimated glomerular filtration rate, mL/min/1.73 \\(\\text{m}^{2}\\). uACR Urine albumin creatinine ratio, mg/g. is_north_american Logical, patient North American cohort. dm Optional integer diabetes indicator, 1 yes, 0 . htn Optional integer hypertension indicator, 1 yes, 0 . albumin Optional serum albumin, g/dL, required 8 variable model. phosphorous Optional serum phosphorus, mg/dL, 8 variable model. bicarbonate Optional serum bicarbonate, mmol/L, 8 variable model. calcium Optional serum calcium, mg/dL, 8 variable model. years Integer, prediction horizon, 2 5.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/risk_pred_core.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"KFRE risk prediction for a single person — risk_pred_core","text":"Numeric probability 0 1.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/risk_pred_core.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"KFRE risk prediction for a single person — risk_pred_core","text":"Tangri, N., Stevens, L. ., Griffith, J., Tighiouart, H., Djurdjev, O., Naimark, D., Levin, ., & Levey, . S. (2011). predictive model progression chronic kidney disease kidney failure. JAMA, 305(15), 1553–1559. doi:10.1001/jama.2011.451 Tangri, N., Grams, M. E., Levey, . S., et al. (2016). Multinational assessment accuracy Kidney Failure Risk Equation people chronic kidney disease. JAMA, 315(2), 164–174. doi:10.1001/jama.2015.18202","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/risk_pred_core.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"KFRE risk prediction for a single person — risk_pred_core","text":"","code":"risk_pred_core(60, 1, 45, 120, TRUE, dm = 1, htn = 1, years = 2) #> [1] 0.01071585"},{"path":"https://lshpaner.github.io/kfre_r/reference/upcr_uacr.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert UPCR to UACR with clinical covariates — upcr_uacr","title":"Convert UPCR to UACR with clinical covariates — upcr_uacr","text":"Implements equation reported Sumida et al. converting urine protein–creatinine ratio urine albumin–creatinine ratio, adjustments sex, diabetes, hypertension.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/upcr_uacr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert UPCR to UACR with clinical covariates — upcr_uacr","text":"","code":"upcr_uacr(   df,   sex_col,   diabetes_col,   hypertension_col,   upcr_col,   female_str = \"female\" )"},{"path":"https://lshpaner.github.io/kfre_r/reference/upcr_uacr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert UPCR to UACR with clinical covariates — upcr_uacr","text":"df data.frame containing required columns. sex_col Column name sex labels, character. Example: \"sex\". diabetes_col Column name diabetes indicator, 0 1, logical. Example: \"diabetes\". hypertension_col Column name hypertension indicator, 0 1, logical. Example: \"hypertension\". upcr_col Column name UPCR values. Units match used derive model Sumida et al. (mg/g). data use different units, convert calling. female_str String denotes female sex_col. Default \"female\".","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/upcr_uacr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert UPCR to UACR with clinical covariates — upcr_uacr","text":"numeric vector UACR values, length nrow(df). Non valid rows return NA_real_.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/upcr_uacr.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Convert UPCR to UACR with clinical covariates — upcr_uacr","text":"function applies piecewise log transformation UPCR cut points 50 500, adds covariate adjustments sex, diabetes, hypertension, exponentiates return UACR. Valid rows require non missing diabetes hypertension indicators. Sex mapped indicator using female_str.","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/upcr_uacr.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Convert UPCR to UACR with clinical covariates — upcr_uacr","text":"Sumida, K., Nadkarni, G. N., Grams, M. E., Sang, Y., Ballew, S. H., Coresh, J., Matsushita, K., Surapaneni, ., Brunskill, N., Chadban, S. J., Chang, . R., Cirillo, M., Daratha, K. B., Gansevoort, R. T., Garg, . X., Iacoviello, L., Kayama, T., Konta, T., Kovesdy, C. P., Lash, J., Lee, B. J., Major, R. W., Metzger, M., Miura, K., Naimark, D. M. J., Nelson, R. G., Sawhney, S., Stempniewicz, N., Tang, M., Townsend, R. R., Traynor, J. P., Valdivielso, J. M., Wetzels, J., Polkinghorne, K. R., Heerspink, H. J. L. (2020). Conversion urine protein-creatinine ratio urine dipstick protein urine albumin-creatinine ratio use chronic kidney disease screening prognosis. Annals Internal Medicine, 173(6), 426-435. doi:10.7326/M20-0529","code":""},{"path":"https://lshpaner.github.io/kfre_r/reference/upcr_uacr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert UPCR to UACR with clinical covariates — upcr_uacr","text":"","code":"df <- data.frame(   sex = c(\"female\", \"male\"),   diabetes = c(1, 0),   hypertension = c(0, 1),   upcr = c(100, 400)  # mg/g (or same ratio units) ) upcr_uacr(df, \"sex\", \"diabetes\", \"hypertension\", \"upcr\") #> [1]  15.6529 154.9863"},{"path":"https://lshpaner.github.io/kfre_r/news/index.html","id":"kfre-002","dir":"Changelog","previous_headings":"","what":"kfre 0.0.2","title":"kfre 0.0.2","text":"CRAN release: 2025-08-28","code":""},{"path":"https://lshpaner.github.io/kfre_r/news/index.html","id":"kfre-001","dir":"Changelog","previous_headings":"","what":"kfre 0.0.1","title":"kfre 0.0.1","text":"Initial CRAN submission.","code":""},{"path":"https://lshpaner.github.io/kfre_r/news/index.html","id":"added-0-0-1","dir":"Changelog","previous_headings":"","what":"Added","title":"kfre 0.0.1","text":"Core risk API: risk_pred_core() (2- 5-year KFRE). R6 helper: RiskPredictor predict_kfre() kfre_person(). Dataframe helper: add_kfre_risk_col() append kfre_<n>var_<y>year columns. Performance utilities: eval_kfre_metrics() plot_kfre_metrics(). Outcome & staging: class_esrd_outcome() class_ckd_stages(). Misc: apply_precision(), unit tests incl. Seoul demo (skipped local data missing).","code":""}]
